<div class="cm-calendar">
<style type="text/css">
  .lh_canlendar_color_hightlight{
    color: #2E92FF;
  }
  .cm-calendar .cm-calendar-hd{
    top:44px;
  }
  .cm-calendar{
    padding-top: 30px;
  }
  .cm-day-list:before, .cm-calendar .cm-calendar-hd:before, .cm-calendar .cm-calendar-ft .cm-calendar-quick-nav:before, .cm-day-list:after, .cm-calendar .cm-calendar-hd:after, .cm-calendar .cm-calendar-ft .cm-calendar-quick-nav:after {
    content : "";
    display : table
  }
  .cm-day-list:after, .cm-calendar .cm-calendar-hd:after, .cm-calendar .cm-calendar-ft .cm-calendar-quick-nav:after {
    clear : both
  }
  .cm-day-list li, .cm-calendar .cm-calendar-hd li {
    float      : left;
    width      : 14.2%;
    text-align : center;
    box-sizing : border-box
  }
  .cm-day-list li:nth-of-type(7n), .cm-calendar .cm-calendar-hd li:nth-of-type(7n), .cm-day-list li:nth-of-type(7n+1), .cm-calendar .cm-calendar-hd li:nth-of-type(7n+1) {
    width : 14.5%;
    color : #666
  }
  .cm-day-list {
    border-bottom : 1px solid #dbdbdb
  }
  .cm-day-list:last-of-type {
    border-bottom : none
  }
  .cm-day-list li {
    position : relative;
    height   : 54px
  }
  .cm-day-list li.active {
    background-color : #099fde
  }
  .cm-day-list li.active .cm-field-title, .cm-day-list li.active .cm-field-price, .cm-day-list li.active .cm-field-label {
    color : #fff
  }
  .cm-day-list li.cm-item--disabled .cm-field-title, .cm-day-list li.cm-item--disabled .cm-field-price, .cm-day-list li.cm-item--disabled .cm-field-label {
    color : #ccc
  }
  .cm-day-list .cm-field-title {
    line-height : 20px;
    font-size   : 16px;
    padding-top : 8px
  }
  .cm-day-list .cm-field-title--festival {
    font-size : 14px
  }
  .cm-day-list .cm-field-price {
    font-size : 12px;
    color     : #999
  }
  .cm-day-list .cm-field-price--sale {
    color : #ff9a14
  }
  .cm-day-list .cm-field-label {
    font-size : 12px
  }
  .cm-day-list .cm-item--multi {
    background-color : rgba(9, 159, 222, 0.1)
  }
  .cm-day-list .icon-calendar-holiday, .cm-day-list .icon-calendar-work {
    position                 : absolute;
    right                    : 0;
    top                      : 0;
    border                   : 1px solid #333;
    line-height              : 14px;
    height                   : 16px;
    width                    : 16px;
    background               : #fff;
    text-align               : center;
    font-size                : 12px;
    -webkit-transform        : scale(0.7);
    -ms-transform            : scale(0.7);
    transform                : scale(0.7);
    -webkit-transform-origin : right top;
    -ms-transform-origin     : right top;
    transform-origin         : right top;
    box-sizing               : border-box
  }
  .cm-day-list .icon-calendar-holiday {
    color        : #52bce8;
    border-color : #52bce8
  }
  .cm-day-list--special li {
    height : 74px
  }
  .cm-calendar .cm-calendar-hd {
    border-bottom    : 1px solid #dbdbdb;
    background-color : #f5f5f5;
    position         : fixed;
    left             : 0;
    right            : 0;
    top              : 44px;
    height           : 30px;
    z-index          : 960
  }
  .cm-calendar .cm-calendar-hd li {
    color       : #666;
    line-height : 30px
  }
  .cm-calendar .cm-calendar-bd {
    background-color : #fff;
    padding-bottom   : 44px
  }
  .cm-calendar .cm-month {
    text-align  : center;
    font-size   : 16px;
    line-height : 50px
  }
  .cm-calendar .cm-calendar-ft {
    border-top       : 1px solid #dbdbdb;
    background-color : #efefef;
    position         : fixed;
    left             : 0;
    right            : 0;
    bottom           : 0;
    padding          : 5px 0;
    overflow-x       : auto
  }
  .cm-calendar .cm-calendar-ft .cm-calendar-quick-nav {
    white-space : nowrap
  }
  .cm-calendar .cm-calendar-ft li {
    display          : inline-block;
    line-height      : 30px;
    padding          : 0 10px;
    border-radius    : 4px;
    text-align       : center;
    background-color : #ccc;
    margin           : 0 5px
  }
  .cm-calendar .cm-calendar-ft li.active {
    background-color : #099fde;
    color            : #fff
  }
  .cm-calendar .cm-calendar-hd li:nth-of-type(7n), .cm-calendar .cm-calendar-hd li:nth-of-type(7n+1) {
    color : #52bce8
  }
  .cm-calendar .cm-calendar-hd {
    top : 84px
  }
  .cm-calendar_tips {
    position         : fixed;
    top              : 44px;
    width            : 100%;
    height           : 40px;
    overflow         : hidden;
    padding          : 5px 10px 0;
    font-size        : 12px;
    line-height      : 1.4;
    border-bottom    : 1px solid #D9D9D9;
    background-color : #FBF5DE;
    color            : #666;
    z-index          : 961;
    box-sizing       : border-box
  }
  .cm-calendar_tips span {
    display        : inline-block;
    vertical-align : middle
  }
  .cm-calendar_tips:before {
    display        : inline-block;
    width          : 1px;
    height         : 30px;
    overflow       : hidden;
    vertical-align : middle;
    content        : "";
    margin-left    : -1px
  }
</style>
  <!--add tips-->
  <% if(tips && !selfTips){ %>
  <style type="text/css">
    .cm-calendar .cm-calendar-hd{
      top:84px;
    }
    .cm-calendar{
      padding-top: 70px;
    }
  </style>
  <p class="cm-calendar_tips"><span><%=tips%></span></p>
  <% } %>
  <% if(!tips && selfTips){ %>
  <%=selfTips%>
  <% } %>

  <ul class="cm-calendar-hd js_weekend">
    <% var i = 0, day1 = 0;  %>
    <%for(day1 = 0; day1 < 7; day1++) { %>
    <li><%=weekDayArr[day1] %></li>
    <%} %>
  </ul>

  <div class="cm-calendar-bd ">
    <%for(var j = 0; j < displayMonthNum; j++) { %>
    <%
    var changedMonth = month + j;
    var yyy =  parseInt(( month + j ) / 12);
    if(changedMonth > 11) {
    changedMonth = changedMonth - 12 * yyy;
    }
    changedYear = year + yyy;
    var d = new Date(changedYear, changedMonth);
    var days = _.dateUtil.getDaysOfMonth(d);
    var beginWeek = _.dateUtil.getBeginDayOfMouth(d);
    var endDateTime = endDate.getTime();

    var str_month = MonthClapFn(changedYear, changedMonth);
    %>
    <%if(str_month.length > 0 ) { %>
    <h3 class="cm-month js_month"><%=str_month %></h3>
    <% } %>
    <ul class="cm-day-list">
      <% for(i = 0; i < beginWeek; i++) { %>
      <li class="js_empty_day"></li>
      <% } %>
      <% for(i = 0; i < days; i++) { %>
      <% var day = i + 1; %>
      <% var dateObj = new Date(changedYear, changedMonth, day ); %>
      <% var calendar_time = dateObj.getTime(); %>
      <% var difftime = calendar_time -curTime; %>
      <% var _difftime =  -1 * difftime; %>
      <% var diffHour =  parseInt(_difftime / 3600000 * 100) / 100; %>
      <% var _diffHour =  parseInt((startTime.getTime() - calendar_time) / 36000) / 100; %>
      <!--特殊需求，特别对待-->
      <!--这段针对li层面修改-->
      <%if(defineLi){ %>
      <%
      var otherData = {
      diffHour: diffHour,
      _difftime: _difftime,
      _diffHour: _diffHour,
      endTime: endTime,
      changedMonth: changedMonth,
      changedYear: changedYear,
      day: day
      };
      %>
      <%=dayWrapperItemFn.call(scope, changedYear, changedMonth, day, dateObj, difftime, otherData) %>
      <%} else { %>
      <li  data-curTime="<%=diffHour %>" class="js_calendar_item <%if(_diffHour >= 24 || (endTime && calendar_time > endTime.getTime() )) { %> js_overdue_day cm-item--disabled <%} %> " data-cndate="<%=changedYear%>-<%=changedMonth + 1%>-<%=day%>" data-date="<%=changedYear%>-<%=changedMonth%>-<%=day%>">
        <%=dayItemFn.call(scope, changedYear, changedMonth, day, dateObj, difftime)%>
      </li>
      <%} %>

      <% } %>
    </ul>
    <%} %>

  </div>

  <%if(showNav){%>
  <!--add footernav-->
  <div class="cm-calendar-ft">
    <ul class="cm-calendar-quick-nav">
      <%if(footNavDate){
      var count = 0;
      for(var i in footNavDate){
      if(count === 0){%>
      <li class="active js_calendar_item w_date_nav_click" data-date="<%=footNavDate[i]%>"><%=i%></li>
      <%}else{%>
      <li class="w_date_nav_click" data-date="<%=footNavDate[i]%>"><%=i%></li>
      <%}
      count++;
      }%>
      <%}%>
    </ul>
  </div>
  <%}%>
</div>








